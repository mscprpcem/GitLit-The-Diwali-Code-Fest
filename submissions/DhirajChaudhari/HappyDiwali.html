<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Happy Diwali </title>
    <style>
        :root {
            --bg: #050014;
            --accent: #ffb74d;
            --glow: #ffd54f
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font-family: 'Segoe UI', system-ui, Roboto, Helvetica, Arial, sans-serif
        }

        body {
            background: radial-gradient(ellipse at bottom, #0b0d36 0%, var(--bg) 60%);
            color: #fff;
            overflow: hidden;
            position: relative
        }

        .stars {
            position: fixed;
            inset: 0;
            background-image: radial-gradient(2px 2px at 20px 30px, white, transparent), radial-gradient(2px 2px at 60px 70px, white, transparent), radial-gradient(1px 1px at 50px 50px, white, transparent), radial-gradient(1px 1px at 130px 80px, white, transparent), radial-gradient(2px 2px at 90px 10px, white, transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 4s infinite;
            opacity: 0.7;
            z-index: 0
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.7
            }

            50% {
                opacity: 0.95
            }
        }

        .container {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            z-index: 2
        }

        h1 {
            font-size: clamp(2.5rem, 6vw, 5rem);
            margin: 0 0.5rem 1rem;
            text-align: center;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #ffecb3, #ffb74d, #ff8a65, #ffd54f);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s infinite;
            font-weight: 700
        }

        @keyframes shimmer {

            0%,
            100% {
                filter: brightness(1)
            }

            50% {
                filter: brightness(1.3)
            }
        }

        p.lead {
            max-width: 700px;
            text-align: center;
            margin: 0 auto 2.5rem;
            font-size: 1.1rem;
            opacity: 0.95;
            line-height: 1.7;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5)
        }

        .diyas {
            display: flex;
            gap: clamp(16px, 3vw, 28px);
            align-items: flex-end;
            margin: 1.5rem 0
        }

        .diya {
            width: 80px;
            height: 80px;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s;
            filter: drop-shadow(0 8px 24px rgba(255, 180, 77, 0.3))
        }

        .diya:hover {
            transform: scale(1.1) translateY(-5px)
        }

        .diya .pot {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 44px;
            border-radius: 0 0 42px 42px;
            background: linear-gradient(180deg, #3b2a0b, #1d1508);
            box-shadow: inset 0 -6px 12px rgba(0, 0, 0, 0.55), 0 4px 12px rgba(0, 0, 0, 0.4);
            border: 2px solid #2d1f08
        }

        .diya .oil {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 8px;
            background: linear-gradient(90deg, #ff8a00, #ffb800);
            border-radius: 50%;
            opacity: 0.6
        }

        .diya .flame {
            position: absolute;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 32px;
            border-radius: 50% 50% 45% 45%;
            background: linear-gradient(180deg, #fff9c4, #ffb74d, #ff8a65);
            filter: blur(0.3px);
            animation: flame 800ms infinite ease-in-out;
            box-shadow: 0 0 20px #ff8a65, 0 0 40px rgba(255, 138, 101, 0.5)
        }

        .diya .flame::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 15%;
            transform: translate(-50%, -30%);
            width: 12px;
            height: 16px;
            border-radius: 50%;
            background: linear-gradient(180deg, #fff, #ffd54f);
            opacity: 1;
            filter: blur(1px)
        }

        .diya .glow {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(255, 183, 77, 0.4), transparent 70%);
            border-radius: 50%;
            animation: pulse 2s infinite
        }

        @keyframes flame {

            0%,
            100% {
                transform: translateX(-50%) translateY(0) scaleY(1) scaleX(1)
            }

            25% {
                transform: translateX(-50%) translateY(-3px) scaleY(1.08) scaleX(0.95)
            }

            50% {
                transform: translateX(-50%) translateY(-2px) scaleY(1.05) scaleX(1.02)
            }

            75% {
                transform: translateX(-50%) translateY(-4px) scaleY(1.1) scaleX(0.93)
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 0.6;
                transform: translateX(-50%) scale(1)
            }

            50% {
                opacity: 0.9;
                transform: translateX(-50%) scale(1.2)
            }
        }

        canvas#fw {
            position: fixed;
            inset: 0;
            z-index: 1;
            pointer-events: none
        }

        .content {
            position: relative;
            z-index: 2;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3)
        }

        .lantern {
            position: absolute;
            width: 40px;
            height: 56px;
            border-radius: 8px 8px 4px 4px;
            background: linear-gradient(180deg, #ffecb3, #ffb74d, #ff8a65);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.3);
            opacity: 0.9;
            border: 1px solid rgba(255, 200, 100, 0.6)
        }

        .lantern::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            border: 2px solid rgba(139, 69, 19, 0.6);
            border-radius: 4px
        }

        .lantern::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -12px;
            width: 2px;
            height: 16px;
            background: linear-gradient(180deg, #8b4513, transparent);
            transform: translateX(-50%)
        }

        .controls {
            position: fixed;
            right: 16px;
            top: 16px;
            z-index: 3;
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        button {
            background: rgba(255, 183, 77, 0.15);
            color: #fff;
            border: 1px solid rgba(255, 183, 77, 0.3);
            padding: 10px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3)
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 183, 77, 0.3);
            background: rgba(255, 183, 77, 0.25);
            border-color: rgba(255, 183, 77, 0.5)
        }

        button:active {
            transform: translateY(-1px)
        }

        .instruction {
            text-align: center;
            margin-top: 1.8rem;
            font-size: 0.95rem;
            opacity: 0.85;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto
        }

        footer {
            position: fixed;
            left: 16px;
            bottom: 16px;
            color: #ddd;
            opacity: 0.85;
            font-size: 0.9rem;
            z-index: 3;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5)
        }

        @media (max-width:640px) {
            .diyas {
                gap: 14px
            }

            .diya {
                width: 64px;
                height: 64px
            }

            .diya .pot {
                width: 64px;
                height: 36px
            }

            .diya .flame {
                bottom: 30px;
                width: 16px;
                height: 26px
            }

            .controls {
                right: 8px;
                top: 8px
            }

            button {
                padding: 8px 12px;
                font-size: 0.85rem
            }

            h1 {
                font-size: 2rem
            }

            .content {
                padding: 2rem 1.5rem
            }
        }
    </style>
</head>

<body>
    <div class="stars"></div>
    <canvas id="fw"></canvas>

    <div class="container">
        <div class="content" role="main">
            <h1>‚ú® Happy Diwali ‚ú®</h1>
            <p class="lead">May your life be illuminated with joy, prosperity, and the sparkle of festival lights. Let
                these dancing flames and celestial fireworks celebrate this Festival of Lights with you.</p>

            <div class="diyas" aria-label="Traditional oil lamps">
                <div class="diya" onclick="this.querySelector('.flame').style.animation='flame 400ms infinite'">
                    <div class="glow"></div>
                    <div class="pot"></div>
                    <div class="oil"></div>
                    <div class="flame"></div>
                </div>
                <div class="diya" onclick="this.querySelector('.flame').style.animation='flame 400ms infinite'">
                    <div class="glow"></div>
                    <div class="pot"></div>
                    <div class="oil"></div>
                    <div class="flame"></div>
                </div>
                <div class="diya" onclick="this.querySelector('.flame').style.animation='flame 400ms infinite'">
                    <div class="glow"></div>
                    <div class="pot"></div>
                    <div class="oil"></div>
                    <div class="flame"></div>
                </div>
            </div>

            <p class="instruction">üí´ Click anywhere for fireworks ‚Ä¢ Click diyas to make flames dance ‚Ä¢ Use controls to
                customize your experience ‚Ä¢ Try the read-aloud feature for mindful practice</p>
        </div>
    </div>

    <div class="controls">
        <button id="toggleFire">üéÜ Fireworks ON</button>
        <button id="toggleLantern">üèÆ Lanterns ON</button>
        <button id="speech">üîä Read Aloud</button>
        <button id="reset">üîÑ Reset All</button>
    </div>

    <footer>Diwali 2025</footer>

    <script>
        const canvas = document.getElementById('fw');
        const ctx = canvas.getContext('2d');
        let W, H;

        function resize() {
            W = canvas.width = innerWidth;
            H = canvas.height = innerHeight;
        }
        addEventListener('resize', resize);
        resize();

        class Particle {
            constructor(x, y, dx, dy, color, life, size = 2) {
                this.x = x;
                this.y = y;
                this.dx = dx;
                this.dy = dy;
                this.color = color;
                this.life = life;
                this.age = 0;
                this.size = size;
                this.gravity = 0.015;
            }

            step(dt) {
                this.x += this.dx * dt;
                this.y += this.dy * dt;
                this.dy += this.gravity * dt;
                this.dx *= 0.99;
                this.age += dt;
            }

            draw() {
                const progress = this.age / this.life;
                const alpha = Math.max(1 - progress, 0);
                const size = this.size * (1 - progress * 0.5);

                ctx.globalAlpha = alpha;
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 8;
                ctx.shadowColor = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, Math.max(size, 0.5), 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
                ctx.globalAlpha = 1;
            }
        }

        let particles = [];
        let fireworksOn = true;
        let lanternsOn = true;
        let autoFireworkInterval;

        const colors = [
            '#ffecb3', '#ffd54f', '#ff8a65', '#ff6e40',
            '#e91e63', '#7c4dff', '#00e5ff', '#00e676',
            '#ffb74d', '#ff9800', '#ffc107', '#64ffda'
        ];

        function explode(x, y, customCount) {
            const count = customCount || (80 + Math.floor(Math.random() * 60));
            const colorPalette = Math.random() > 0.5
                ? colors.slice(0, 4)
                : colors.slice(4);

            for (let i = 0; i < count; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 1.5 + Math.random() * 5.5;
                const dx = Math.cos(angle) * speed;
                const dy = Math.sin(angle) * speed;
                const color = colorPalette[Math.floor(Math.random() * colorPalette.length)];
                const life = 60 + Math.random() * 80;
                const size = 1.5 + Math.random() * 2;
                particles.push(new Particle(x, y, dx, dy, color, life, size));
            }

            for (let i = 0; i < 20; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = 0.5 + Math.random() * 2;
                const dx = Math.cos(angle) * speed;
                const dy = Math.sin(angle) * speed;
                particles.push(new Particle(x, y, dx, dy, '#ffffff', 40, 1.5));
            }
        }

        function startAutoFireworks() {
            autoFireworkInterval = setInterval(() => {
                if (!fireworksOn) return;
                const x = Math.random() * W;
                const y = Math.random() * H * 0.5 + H * 0.05;
                explode(x, y);
            }, 1200);
        }

        function stopAutoFireworks() {
            if (autoFireworkInterval) clearInterval(autoFireworkInterval);
        }

        startAutoFireworks();

        function animate() {
            ctx.fillStyle = 'rgba(5, 0, 20, 0.15)';
            ctx.fillRect(0, 0, W, H);

            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.step(1);
                p.draw();
                if (p.age > p.life) particles.splice(i, 1);
            }

            requestAnimationFrame(animate);
        }
        animate();

        const lanterns = [];

        function createLantern() {
            const el = document.createElement('div');
            el.className = 'lantern';
            document.body.appendChild(el);

            const startX = Math.random() * innerWidth;
            const startY = innerHeight + 70;
            el.style.left = startX + 'px';
            el.style.top = startY + 'px';

            const speed = 0.4 + Math.random() * 0.7;
            const sway = (Math.random() * 2 - 1) * 0.8;

            lanterns.push({
                el,
                x: startX,
                y: startY,
                speed,
                sway,
                t: Math.random() * Math.PI * 2
            });
        }

        for (let i = 0; i < 5; i++) createLantern();

        function animateLanterns() {
            if (!lanternsOn) {
                lanterns.forEach(l => l.el.style.display = 'none');
            } else {
                lanterns.forEach((l, idx) => {
                    l.el.style.display = 'block';
                    l.t += 0.015;
                    l.y -= l.speed;
                    l.x += Math.sin(l.t * 1.4) * l.sway;

                    const rotation = Math.sin(l.t * 0.8) * 8;
                    l.el.style.transform = `translate(-50%, -50%) translate(${l.x}px, ${l.y}px) rotate(${rotation}deg)`;

                    if (l.y < -100) {
                        l.el.remove();
                        lanterns.splice(idx, 1);
                        if (Math.random() > 0.3) createLantern();
                    }
                });
            }
            requestAnimationFrame(animateLanterns);
        }
        animateLanterns();

        const fireBtn = document.getElementById('toggleFire');
        const lanternBtn = document.getElementById('toggleLantern');

        fireBtn.addEventListener('click', () => {
            fireworksOn = !fireworksOn;
            fireBtn.textContent = fireworksOn ? 'üéÜ Fireworks ON' : 'üéÜ Fireworks OFF';
            if (fireworksOn) startAutoFireworks();
            else stopAutoFireworks();
        });

        lanternBtn.addEventListener('click', () => {
            lanternsOn = !lanternsOn;
            lanternBtn.textContent = lanternsOn ? 'üèÆ Lanterns ON' : 'üèÆ Lanterns OFF';
            if (lanternsOn && lanterns.length < 3) {
                for (let i = 0; i < 4; i++) createLantern();
            }
        });

        const msgText = `Happy Diwali! May your life be illuminated with joy, prosperity, and endless celebrations. This Festival of Lights brings hope, happiness, and harmony to all. Let the diyas you see here remind you of the light within you, and may the fireworks fill your heart with wonder and excitement. Wishing you and your loved ones a joyous and prosperous Diwali!`;

        document.getElementById('speech').addEventListener('click', () => {
            if (!('speechSynthesis' in window)) {
                alert('Speech synthesis is not supported in your browser.');
                return;
            }

            const utterance = new SpeechSynthesisUtterance(msgText);
            utterance.rate = 0.9;
            utterance.pitch = 1.1;
            utterance.volume = 1;

            window.speechSynthesis.cancel();
            window.speechSynthesis.speak(utterance);
        });

        document.getElementById('reset').addEventListener('click', () => {
            particles = [];
            if (!fireworksOn) {
                fireworksOn = true;
                fireBtn.textContent = 'üéÜ Fireworks ON';
                startAutoFireworks();
            }
            if (!lanternsOn) {
                lanternsOn = true;
                lanternBtn.textContent = 'üèÆ Lanterns ON';
                for (let i = 0; i < 4; i++) createLantern();
            }
            // Trigger celebration burst
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    explode(Math.random() * W, Math.random() * H * 0.5, 150);
                }, i * 200);
            }
        });

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            explode(x, y, 120);
        });

        setInterval(() => {
            if (!fireworksOn) return;
            const x = Math.random() * W;
            const y = Math.random() * H * 0.4;
            explode(x, y, 30);
        }, 3500);
    </script>
</body>

</html>
